<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>M3U8 Player</title>
  <script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
</head>
<body style="margin:0;">
  <div id="player"></div>
<script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
<script>
  const slug = location.hash.replace(/^#/, '');

  fetch(`https://dutamovies-9bc4c-default-rtdb.asia-southeast1.firebasedatabase.app/movies/${slug}.json`)
    .then(res => res.json())
    .then(data => {
      const encoded = encodeURIComponent(data.m3u8);
      const proxy = `https://player.sdrama.workers.dev/?url=${encoded}&token=RAHASIA123`;

      new Clappr.Player({
        source: proxy,
        parentId: "#player",
        autoPlay: true,
        width: "100%",
        height: "100%",
        mimeType: "application/x-mpegURL"
      });
    });
</script>

</body>
</html>
